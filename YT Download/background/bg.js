!function(){var e=function(){let e=navigator.userAgent.toLowerCase(),n="";return-1<e.indexOf("opera")||-1<e.indexOf("opr")?n="opera":-1<e.indexOf("firefox")?n="firefox":-1<e.indexOf("edg")?n="edge":-1<e.indexOf("chrome")?n="chrome":-1<e.indexOf("safari")?n="safari":(-1<e.indexOf("msie")||1==!!document.documentMode)&&(n="ie"),n}();let r=(-1<["chrome","edge","opera"].indexOf(e)?1:0)?chrome:browser;try{r.webRequest.onHeadersReceived.addListener(e=>{const n=e.url;var t=0<n.indexOf("webm&")?"webm":0<n.indexOf("3gpp&")||0<n.indexOf("3gp&")?"3gp":"mp4",o=0<n.indexOf("&mime=audio")?"_audio":"",i=function(e,n){let t=!1;try{const o=e.split("?"),i=o[1].split("&");i.forEach(e=>{e=e.split("=");e[0]===n&&(t=e[1])})}catch(e){}return t}(n,"yt4ktitle"),i=i?function(e){let n=e;try{n=decodeURIComponent(e).replace(/\+/g," ").replace(/\s\s+/g," ")}catch(e){}return n}(i):"youtube",i=t?i+o+"."+t:"";const a=e.responseHeaders.filter(e=>(key=e.name.toLowerCase(),-1===["content-type","content-description","content-transfer-encoding","content-disposition"].indexOf(key)));return a.push({name:"Content-Type",value:"application/octet-stream"},{name:"Content-Description",value:"File Transfer"},{name:"Content-Transfer-Encoding",value:"Binary"},{name:"Content-Disposition",value:"attachment"+(i?"; filename="+i:"")}),{responseHeaders:a}},{urls:["https://*.googlevideo.com/videoplayback*"],types:["main_frame"]},["blocking","responseHeaders"])}catch(e){}r.runtime.onMessage.addListener(function(e,n,t){if("command"in e&&"data"in e){var o=e.command,e=e.data;if("icon"==o){o=e;e=n.tab.id;active=parseInt(o.active);var i="";active||(i="2");const a={};[16,32,48,64,96,128,256,512].forEach(function(e,n){a[e]="../assets/icons/i"+i+"-"+e+".png"}),r.browserAction.setIcon({path:a,tabId:e})}}})}();